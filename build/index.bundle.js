!function(e){function t(r){if(n[r])return n[r].exports;var o=n[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,t),o.l=!0,o.exports}var n={};t.m=e,t.c=n,t.d=function(e,n,r){t.o(e,n)||Object.defineProperty(e,n,{configurable:!1,enumerable:!0,get:r})},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=0)}([function(e,t,n){"use strict";var r=n(1),o=function(e){return e&&e.__esModule?e:{default:e}}(r);if(window.PaymentRequest){var u=document.createElement("input"),a=document.createElement("button");u.classList.add("js-payment-amount"),a.textContent="Pay",document.querySelector("body").appendChild(u),document.querySelector("body").appendChild(a),a.addEventListener("click",function(){return new o.default(u.value)})}else{var i=document.createElement("div"),c=document.createElement("a"),l=document.querySelector("body");c.href="https://web-payment-apis.appspot.com/",c.textContent="Maybe you will try apple pay?",i.textContent="No support",l.appendChild(i),l.appendChild(c)}},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"RUB",o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:["basic-card"];r(this,e),this.value=t,this.currency=n,this.supportedMethods=o,this.init()}return o(e,[{key:"init",value:function(){var e=this.configure(),t=e.paymentMethods,n=e.paymentDetails,r=e.options;new PaymentRequest(t,n,r).show().then(function(e){return console.log(e)}).catch(function(e){return console.log("Error: ",e)})}},{key:"configure",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.value,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.currency;return{paymentMethods:[{supportedMethods:arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.supportedMethods}],paymentDetails:{total:{label:"Diz maney",amount:{currency:t,value:e}},displayItems:[{label:"Discount",amount:{currency:t,value:-5}}]},options:{requestPayerName:!0,requestPayerEmail:!0}}}}]),e}();t.default=u}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vaW5kZXguYnVuZGxlLmpzIiwid2VicGFjazovLy93ZWJwYWNrL2Jvb3RzdHJhcCA2NDE5MzRhZGY4ZjU1MzA3MzljMCIsIndlYnBhY2s6Ly8vLi9zcmMvaW5kZXguanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL3V0aWxzL3BheW1lbnQuanMiXSwibmFtZXMiOlsibW9kdWxlcyIsIl9fd2VicGFja19yZXF1aXJlX18iLCJtb2R1bGVJZCIsImluc3RhbGxlZE1vZHVsZXMiLCJleHBvcnRzIiwibW9kdWxlIiwiaSIsImwiLCJjYWxsIiwibSIsImMiLCJkIiwibmFtZSIsImdldHRlciIsIm8iLCJPYmplY3QiLCJkZWZpbmVQcm9wZXJ0eSIsImNvbmZpZ3VyYWJsZSIsImVudW1lcmFibGUiLCJnZXQiLCJuIiwiX19lc01vZHVsZSIsIm9iamVjdCIsInByb3BlcnR5IiwicHJvdG90eXBlIiwiaGFzT3duUHJvcGVydHkiLCJwIiwicyIsIl9wYXltZW50IiwiX3BheW1lbnQyIiwib2JqIiwiZGVmYXVsdCIsIndpbmRvdyIsIlBheW1lbnRSZXF1ZXN0IiwicGF5bWVudEFtb3VudCIsImRvY3VtZW50IiwiY3JlYXRlRWxlbWVudCIsInBheW1lbnRTdWJtaXQiLCJjbGFzc0xpc3QiLCJhZGQiLCJ0ZXh0Q29udGVudCIsInF1ZXJ5U2VsZWN0b3IiLCJhcHBlbmRDaGlsZCIsImFkZEV2ZW50TGlzdGVuZXIiLCJ2YWx1ZSIsIndhcm4iLCJsaW5rIiwiYm9keSIsImhyZWYiLCJfY2xhc3NDYWxsQ2hlY2siLCJpbnN0YW5jZSIsIkNvbnN0cnVjdG9yIiwiVHlwZUVycm9yIiwiX2NyZWF0ZUNsYXNzIiwiZGVmaW5lUHJvcGVydGllcyIsInRhcmdldCIsInByb3BzIiwibGVuZ3RoIiwiZGVzY3JpcHRvciIsIndyaXRhYmxlIiwia2V5IiwicHJvdG9Qcm9wcyIsInN0YXRpY1Byb3BzIiwiUGF5bWVudCIsImN1cnJlbmN5IiwiYXJndW1lbnRzIiwidW5kZWZpbmVkIiwic3VwcG9ydGVkTWV0aG9kcyIsInRoaXMiLCJpbml0IiwiX2NvbmZpZ3VyZSIsImNvbmZpZ3VyZSIsInBheW1lbnRNZXRob2RzIiwicGF5bWVudERldGFpbHMiLCJvcHRpb25zIiwic2hvdyIsInRoZW4iLCJyZXMiLCJjb25zb2xlIiwibG9nIiwiY2F0Y2giLCJlcnIiLCJ0b3RhbCIsImxhYmVsIiwiYW1vdW50IiwiZGlzcGxheUl0ZW1zIiwicmVxdWVzdFBheWVyTmFtZSIsInJlcXVlc3RQYXllckVtYWlsIl0sIm1hcHBpbmdzIjoiQ0FBUyxTQUFVQSxHQ0luQixRQUFBQyxHQUFBQyxHQUdBLEdBQUFDLEVBQUFELEdBQ0EsTUFBQUMsR0FBQUQsR0FBQUUsT0FHQSxJQUFBQyxHQUFBRixFQUFBRCxJQUNBSSxFQUFBSixFQUNBSyxHQUFBLEVBQ0FILFdBVUEsT0FOQUosR0FBQUUsR0FBQU0sS0FBQUgsRUFBQUQsUUFBQUMsSUFBQUQsUUFBQUgsR0FHQUksRUFBQUUsR0FBQSxFQUdBRixFQUFBRCxRQXZCQSxHQUFBRCxLQTRCQUYsR0FBQVEsRUFBQVQsRUFHQUMsRUFBQVMsRUFBQVAsRUFHQUYsRUFBQVUsRUFBQSxTQUFBUCxFQUFBUSxFQUFBQyxHQUNBWixFQUFBYSxFQUFBVixFQUFBUSxJQUNBRyxPQUFBQyxlQUFBWixFQUFBUSxHQUNBSyxjQUFBLEVBQ0FDLFlBQUEsRUFDQUMsSUFBQU4sS0FNQVosRUFBQW1CLEVBQUEsU0FBQWYsR0FDQSxHQUFBUSxHQUFBUixLQUFBZ0IsV0FDQSxXQUEyQixNQUFBaEIsR0FBQSxTQUMzQixXQUFpQyxNQUFBQSxHQUVqQyxPQURBSixHQUFBVSxFQUFBRSxFQUFBLElBQUFBLEdBQ0FBLEdBSUFaLEVBQUFhLEVBQUEsU0FBQVEsRUFBQUMsR0FBc0QsTUFBQVIsUUFBQVMsVUFBQUMsZUFBQWpCLEtBQUFjLEVBQUFDLElBR3REdEIsRUFBQXlCLEVBQUEsR0FHQXpCLElBQUEwQixFQUFBLEtETU0sU0FBVXRCLEVBQVFELEVBQVNILEdBRWpDLFlFckVBLElBQUEyQixHQUFB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LE1BVXlCOEIsU0FKdkNZLGtCQUFrQixFQUNsQkMsbUJBQW1CLFFIa0loQnhCLElBR1QzRCxHQUFRMkIsUUd6TGFnQyIsImZpbGUiOiJpbmRleC5idW5kbGUuanMiLCJzb3VyY2VzQ29udGVudCI6WyIvKioqKioqLyAoZnVuY3Rpb24obW9kdWxlcykgeyAvLyB3ZWJwYWNrQm9vdHN0cmFwXG4vKioqKioqLyBcdC8vIFRoZSBtb2R1bGUgY2FjaGVcbi8qKioqKiovIFx0dmFyIGluc3RhbGxlZE1vZHVsZXMgPSB7fTtcbi8qKioqKiovXG4vKioqKioqLyBcdC8vIFRoZSByZXF1aXJlIGZ1bmN0aW9uXG4vKioqKioqLyBcdGZ1bmN0aW9uIF9fd2VicGFja19yZXF1aXJlX18obW9kdWxlSWQpIHtcbi8qKioqKiovXG4vKioqKioqLyBcdFx0Ly8gQ2hlY2sgaWYgbW9kdWxlIGlzIGluIGNhY2hlXG4vKioqKioqLyBcdFx0aWYoaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0pIHtcbi8qKioqKiovIFx0XHRcdHJldHVybiBpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXS5leHBvcnRzO1xuLyoqKioqKi8gXHRcdH1cbi8qKioqKiovIFx0XHQvLyBDcmVhdGUgYSBuZXcgbW9kdWxlIChhbmQgcHV0IGl0IGludG8gdGhlIGNhY2hlKVxuLyoqKioqKi8gXHRcdHZhciBtb2R1bGUgPSBpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXSA9IHtcbi8qKioqKiovIFx0XHRcdGk6IG1vZHVsZUlkLFxuLyoqKioqKi8gXHRcdFx0bDogZmFsc2UsXG4vKioqKioqLyBcdFx0XHRleHBvcnRzOiB7fVxuLyoqKioqKi8gXHRcdH07XG4vKioqKioqL1xuLyoqKioqKi8gXHRcdC8vIEV4ZWN1dGUgdGhlIG1vZHVsZSBmdW5jdGlvblxuLyoqKioqKi8gXHRcdG1vZHVsZXNbbW9kdWxlSWRdLmNhbGwobW9kdWxlLmV4cG9ydHMsIG1vZHVsZSwgbW9kdWxlLmV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pO1xuLyoqKioqKi9cbi8qKioqKiovIFx0XHQvLyBGbGFnIHRoZSBtb2R1bGUgYXMgbG9hZGVkXG4vKioqKioqLyBcdFx0bW9kdWxlLmwgPSB0cnVlO1xuLyoqKioqKi9cbi8qKioqKiovIFx0XHQvLyBSZXR1cm4gdGhlIGV4cG9ydHMgb2YgdGhlIG1vZHVsZVxuLyoqKioqKi8gXHRcdHJldHVybiBtb2R1bGUuZXhwb3J0cztcbi8qKioqKiovIFx0fVxuLyoqKioqKi9cbi8qKioqKiovXG4vKioqKioqLyBcdC8vIGV4cG9zZSB0aGUgbW9kdWxlcyBvYmplY3QgKF9fd2VicGFja19tb2R1bGVzX18pXG4vKioqKioqLyBcdF9fd2VicGFja19yZXF1aXJlX18ubSA9IG1vZHVsZXM7XG4vKioqKioqL1xuLyoqKioqKi8gXHQvLyBleHBvc2UgdGhlIG1vZHVsZSBjYWNoZVxuLyoqKioqKi8gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLmMgPSBpbnN0YWxsZWRNb2R1bGVzO1xuLyoqKioqKi9cbi8qKioqKiovIFx0Ly8gZGVmaW5lIGdldHRlciBmdW5jdGlvbiBmb3IgaGFybW9ueSBleHBvcnRzXG4vKioqKioqLyBcdF9fd2VicGFja19yZXF1aXJlX18uZCA9IGZ1bmN0aW9uKGV4cG9ydHMsIG5hbWUsIGdldHRlcikge1xuLyoqKioqKi8gXHRcdGlmKCFfX3dlYnBhY2tfcmVxdWlyZV9fLm8oZXhwb3J0cywgbmFtZSkpIHtcbi8qKioqKiovIFx0XHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBuYW1lLCB7XG4vKioqKioqLyBcdFx0XHRcdGNvbmZpZ3VyYWJsZTogZmFsc2UsXG4vKioqKioqLyBcdFx0XHRcdGVudW1lcmFibGU6IHRydWUsXG4vKioqKioqLyBcdFx0XHRcdGdldDogZ2V0dGVyXG4vKioqKioqLyBcdFx0XHR9KTtcbi8qKioqKiovIFx0XHR9XG4vKioqKioqLyBcdH07XG4vKioqKioqL1xuLyoqKioqKi8gXHQvLyBnZXREZWZhdWx0RXhwb3J0IGZ1bmN0aW9uIGZvciBjb21wYXRpYmlsaXR5IHdpdGggbm9uLWhhcm1vbnkgbW9kdWxlc1xuLyoqKioqKi8gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm4gPSBmdW5jdGlvbihtb2R1bGUpIHtcbi8qKioqKiovIFx0XHR2YXIgZ2V0dGVyID0gbW9kdWxlICYmIG1vZHVsZS5fX2VzTW9kdWxlID9cbi8qKioqKiovIFx0XHRcdGZ1bmN0aW9uIGdldERlZmF1bHQoKSB7IHJldHVybiBtb2R1bGVbJ2RlZmF1bHQnXTsgfSA6XG4vKioqKioqLyBcdFx0XHRmdW5jdGlvbiBnZXRNb2R1bGVFeHBvcnRzKCkgeyByZXR1cm4gbW9kdWxlOyB9O1xuLyoqKioqKi8gXHRcdF9fd2VicGFja19yZXF1aXJlX18uZChnZXR0ZXIsICdhJywgZ2V0dGVyKTtcbi8qKioqKiovIFx0XHRyZXR1cm4gZ2V0dGVyO1xuLyoqKioqKi8gXHR9O1xuLyoqKioqKi9cbi8qKioqKiovIFx0Ly8gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsXG4vKioqKioqLyBcdF9fd2VicGFja19yZXF1aXJlX18ubyA9IGZ1bmN0aW9uKG9iamVjdCwgcHJvcGVydHkpIHsgcmV0dXJuIE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChvYmplY3QsIHByb3BlcnR5KTsgfTtcbi8qKioqKiovXG4vKioqKioqLyBcdC8vIF9fd2VicGFja19wdWJsaWNfcGF0aF9fXG4vKioqKioqLyBcdF9fd2VicGFja19yZXF1aXJlX18ucCA9IFwiXCI7XG4vKioqKioqL1xuLyoqKioqKi8gXHQvLyBMb2FkIGVudHJ5IG1vZHVsZSBhbmQgcmV0dXJuIGV4cG9ydHNcbi8qKioqKiovIFx0cmV0dXJuIF9fd2VicGFja19yZXF1aXJlX18oX193ZWJwYWNrX3JlcXVpcmVfXy5zID0gMCk7XG4vKioqKioqLyB9KVxuLyoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKi9cbi8qKioqKiovIChbXG4vKiAwICovXG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblwidXNlIHN0cmljdFwiO1xuXG5cbnZhciBfcGF5bWVudCA9IF9fd2VicGFja19yZXF1aXJlX18oMSk7XG5cbnZhciBfcGF5bWVudDIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9wYXltZW50KTtcblxuZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChvYmopIHsgcmV0dXJuIG9iaiAmJiBvYmouX19lc01vZHVsZSA/IG9iaiA6IHsgZGVmYXVsdDogb2JqIH07IH1cblxuaWYgKHdpbmRvdy5QYXltZW50UmVxdWVzdCkge1xuICB2YXIgcGF5bWVudEFtb3VudCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2lucHV0Jyk7XG4gIHZhciBwYXltZW50U3VibWl0ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnYnV0dG9uJyk7XG5cbiAgcGF5bWVudEFtb3VudC5jbGFzc0xpc3QuYWRkKCdqcy1wYXltZW50LWFtb3VudCcpO1xuICBwYXltZW50U3VibWl0LnRleHRDb250ZW50ID0gJ1BheSc7XG5cbiAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcignYm9keScpLmFwcGVuZENoaWxkKHBheW1lbnRBbW91bnQpO1xuICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCdib2R5JykuYXBwZW5kQ2hpbGQocGF5bWVudFN1Ym1pdCk7XG5cbiAgcGF5bWVudFN1Ym1pdC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGZ1bmN0aW9uICgpIHtcbiAgICByZXR1cm4gbmV3IF9wYXltZW50Mi5kZWZhdWx0KHBheW1lbnRBbW91bnQudmFsdWUpO1xuICB9KTtcbn0gZWxzZSB7XG4gIHZhciB3YXJuID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gIHZhciBsaW5rID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnYScpO1xuICB2YXIgYm9keSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJ2JvZHknKTtcbiAgbGluay5ocmVmID0gJ2h0dHBzOi8vd2ViLXBheW1lbnQtYXBpcy5hcHBzcG90LmNvbS8nO1xuICBsaW5rLnRleHRDb250ZW50ID0gJ01heWJlIHlvdSB3aWxsIHRyeSBhcHBsZSBwYXk/JztcbiAgd2Fybi50ZXh0Q29udGVudCA9ICdObyBzdXBwb3J0JztcbiAgYm9keS5hcHBlbmRDaGlsZCh3YXJuKTtcbiAgYm9keS5hcHBlbmRDaGlsZChsaW5rKTtcbn1cblxuLyoqKi8gfSksXG4vKiAxICovXG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblwidXNlIHN0cmljdFwiO1xuXG5cbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwge1xuICB2YWx1ZTogdHJ1ZVxufSk7XG5cbnZhciBfY3JlYXRlQ2xhc3MgPSBmdW5jdGlvbiAoKSB7IGZ1bmN0aW9uIGRlZmluZVByb3BlcnRpZXModGFyZ2V0LCBwcm9wcykgeyBmb3IgKHZhciBpID0gMDsgaSA8IHByb3BzLmxlbmd0aDsgaSsrKSB7IHZhciBkZXNjcmlwdG9yID0gcHJvcHNbaV07IGRlc2NyaXB0b3IuZW51bWVyYWJsZSA9IGRlc2NyaXB0b3IuZW51bWVyYWJsZSB8fCBmYWxzZTsgZGVzY3JpcHRvci5jb25maWd1cmFibGUgPSB0cnVlOyBpZiAoXCJ2YWx1ZVwiIGluIGRlc2NyaXB0b3IpIGRlc2NyaXB0b3Iud3JpdGFibGUgPSB0cnVlOyBPYmplY3QuZGVmaW5lUHJvcGVydHkodGFyZ2V0LCBkZXNjcmlwdG9yLmtleSwgZGVzY3JpcHRvcik7IH0gfSByZXR1cm4gZnVuY3Rpb24gKENvbnN0cnVjdG9yLCBwcm90b1Byb3BzLCBzdGF0aWNQcm9wcykgeyBpZiAocHJvdG9Qcm9wcykgZGVmaW5lUHJvcGVydGllcyhDb25zdHJ1Y3Rvci5wcm90b3R5cGUsIHByb3RvUHJvcHMpOyBpZiAoc3RhdGljUHJvcHMpIGRlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3IsIHN0YXRpY1Byb3BzKTsgcmV0dXJuIENvbnN0cnVjdG9yOyB9OyB9KCk7XG5cbmZ1bmN0aW9uIF9jbGFzc0NhbGxDaGVjayhpbnN0YW5jZSwgQ29uc3RydWN0b3IpIHsgaWYgKCEoaW5zdGFuY2UgaW5zdGFuY2VvZiBDb25zdHJ1Y3RvcikpIHsgdGhyb3cgbmV3IFR5cGVFcnJvcihcIkNhbm5vdCBjYWxsIGEgY2xhc3MgYXMgYSBmdW5jdGlvblwiKTsgfSB9XG5cbnZhciBQYXltZW50ID0gZnVuY3Rpb24gKCkge1xuICBmdW5jdGlvbiBQYXltZW50KHZhbHVlKSB7XG4gICAgdmFyIGN1cnJlbmN5ID0gYXJndW1lbnRzLmxlbmd0aCA+IDEgJiYgYXJndW1lbnRzWzFdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbMV0gOiAnUlVCJztcbiAgICB2YXIgc3VwcG9ydGVkTWV0aG9kcyA9IGFyZ3VtZW50cy5sZW5ndGggPiAyICYmIGFyZ3VtZW50c1syXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzJdIDogWydiYXNpYy1jYXJkJ107XG5cbiAgICBfY2xhc3NDYWxsQ2hlY2sodGhpcywgUGF5bWVudCk7XG5cbiAgICB0aGlzLnZhbHVlID0gdmFsdWU7XG4gICAgdGhpcy5jdXJyZW5jeSA9IGN1cnJlbmN5O1xuICAgIHRoaXMuc3VwcG9ydGVkTWV0aG9kcyA9IHN1cHBvcnRlZE1ldGhvZHM7XG5cbiAgICB0aGlzLmluaXQoKTtcbiAgfVxuXG4gIF9jcmVhdGVDbGFzcyhQYXltZW50LCBbe1xuICAgIGtleTogJ2luaXQnLFxuICAgIHZhbHVlOiBmdW5jdGlvbiBpbml0KCkge1xuICAgICAgdmFyIF9jb25maWd1cmUgPSB0aGlzLmNvbmZpZ3VyZSgpLFxuICAgICAgICAgIHBheW1lbnRNZXRob2RzID0gX2NvbmZpZ3VyZS5wYXltZW50TWV0aG9kcyxcbiAgICAgICAgICBwYXltZW50RGV0YWlscyA9IF9jb25maWd1cmUucGF5bWVudERldGFpbHMsXG4gICAgICAgICAgb3B0aW9ucyA9IF9jb25maWd1cmUub3B0aW9ucztcblxuICAgICAgdmFyIHBheW1lbnQgPSBuZXcgUGF5bWVudFJlcXVlc3QocGF5bWVudE1ldGhvZHMsIHBheW1lbnREZXRhaWxzLCBvcHRpb25zKTtcblxuICAgICAgcGF5bWVudC5zaG93KCkudGhlbihmdW5jdGlvbiAocmVzKSB7XG4gICAgICAgIHJldHVybiBjb25zb2xlLmxvZyhyZXMpO1xuICAgICAgfSkuY2F0Y2goZnVuY3Rpb24gKGVycikge1xuICAgICAgICByZXR1cm4gY29uc29sZS5sb2coJ0Vycm9yOiAnLCBlcnIpO1xuICAgICAgfSk7XG4gICAgfVxuICB9LCB7XG4gICAga2V5OiAnY29uZmlndXJlJyxcbiAgICB2YWx1ZTogZnVuY3Rpb24gY29uZmlndXJlKCkge1xuICAgICAgdmFyIHZhbHVlID0gYXJndW1lbnRzLmxlbmd0aCA+IDAgJiYgYXJndW1lbnRzWzBdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbMF0gOiB0aGlzLnZhbHVlO1xuICAgICAgdmFyIGN1cnJlbmN5ID0gYXJndW1lbnRzLmxlbmd0aCA+IDEgJiYgYXJndW1lbnRzWzFdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbMV0gOiB0aGlzLmN1cnJlbmN5O1xuICAgICAgdmFyIHN1cHBvcnRlZE1ldGhvZHMgPSBhcmd1bWVudHMubGVuZ3RoID4gMiAmJiBhcmd1bWVudHNbMl0gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1syXSA6IHRoaXMuc3VwcG9ydGVkTWV0aG9kcztcblxuICAgICAgdmFyIHBheW1lbnRNZXRob2RzID0gW3tcbiAgICAgICAgc3VwcG9ydGVkTWV0aG9kczogc3VwcG9ydGVkTWV0aG9kc1xuICAgICAgfV07XG4gICAgICB2YXIgcGF5bWVudERldGFpbHMgPSB7XG4gICAgICAgIHRvdGFsOiB7XG4gICAgICAgICAgbGFiZWw6ICdEaXogbWFuZXknLFxuICAgICAgICAgIGFtb3VudDoge1xuICAgICAgICAgICAgY3VycmVuY3k6IGN1cnJlbmN5LFxuICAgICAgICAgICAgdmFsdWU6IHZhbHVlXG4gICAgICAgICAgfVxuICAgICAgICB9LFxuICAgICAgICBkaXNwbGF5SXRlbXM6IFt7XG4gICAgICAgICAgbGFiZWw6ICdEaXNjb3VudCcsXG4gICAgICAgICAgYW1vdW50OiB7XG4gICAgICAgICAgICBjdXJyZW5jeTogY3VycmVuY3ksXG4gICAgICAgICAgICB2YWx1ZTogLTVcbiAgICAgICAgICB9XG4gICAgICAgIH1dXG4gICAgICB9O1xuICAgICAgdmFyIG9wdGlvbnMgPSB7XG4gICAgICAgIHJlcXVlc3RQYXllck5hbWU6IHRydWUsXG4gICAgICAgIHJlcXVlc3RQYXllckVtYWlsOiB0cnVlXG4gICAgICB9O1xuXG4gICAgICByZXR1cm4geyBwYXltZW50TWV0aG9kczogcGF5bWVudE1ldGhvZHMsIHBheW1lbnREZXRhaWxzOiBwYXltZW50RGV0YWlscywgb3B0aW9uczogb3B0aW9ucyB9O1xuICAgIH1cbiAgfV0pO1xuXG4gIHJldHVybiBQYXltZW50O1xufSgpO1xuXG5leHBvcnRzLmRlZmF1bHQgPSBQYXltZW50O1xuXG4vKioqLyB9KVxuLyoqKioqKi8gXSk7XG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIGluZGV4LmJ1bmRsZS5qcyIsIiBcdC8vIFRoZSBtb2R1bGUgY2FjaGVcbiBcdHZhciBpbnN0YWxsZWRNb2R1bGVzID0ge307XG5cbiBcdC8vIFRoZSByZXF1aXJlIGZ1bmN0aW9uXG4gXHRmdW5jdGlvbiBfX3dlYnBhY2tfcmVxdWlyZV9fKG1vZHVsZUlkKSB7XG5cbiBcdFx0Ly8gQ2hlY2sgaWYgbW9kdWxlIGlzIGluIGNhY2hlXG4gXHRcdGlmKGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdKSB7XG4gXHRcdFx0cmV0dXJuIGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdLmV4cG9ydHM7XG4gXHRcdH1cbiBcdFx0Ly8gQ3JlYXRlIGEgbmV3IG1vZHVsZSAoYW5kIHB1dCBpdCBpbnRvIHRoZSBjYWNoZSlcbiBcdFx0dmFyIG1vZHVsZSA9IGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdID0ge1xuIFx0XHRcdGk6IG1vZHVsZUlkLFxuIFx0XHRcdGw6IGZhbHNlLFxuIFx0XHRcdGV4cG9ydHM6IHt9XG4gXHRcdH07XG5cbiBcdFx0Ly8gRXhlY3V0ZSB0aGUgbW9kdWxlIGZ1bmN0aW9uXG4gXHRcdG1vZHVsZXNbbW9kdWxlSWRdLmNhbGwobW9kdWxlLmV4cG9ydHMsIG1vZHVsZSwgbW9kdWxlLmV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pO1xuXG4gXHRcdC8vIEZsYWcgdGhlIG1vZHVsZSBhcyBsb2FkZWRcbiBcdFx0bW9kdWxlLmwgPSB0cnVlO1xuXG4gXHRcdC8vIFJldHVybiB0aGUgZXhwb3J0cyBvZiB0aGUgbW9kdWxlXG4gXHRcdHJldHVybiBtb2R1bGUuZXhwb3J0cztcbiBcdH1cblxuXG4gXHQvLyBleHBvc2UgdGhlIG1vZHVsZXMgb2JqZWN0IChfX3dlYnBhY2tfbW9kdWxlc19fKVxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5tID0gbW9kdWxlcztcblxuIFx0Ly8gZXhwb3NlIHRoZSBtb2R1bGUgY2FjaGVcbiBcdF9fd2VicGFja19yZXF1aXJlX18uYyA9IGluc3RhbGxlZE1vZHVsZXM7XG5cbiBcdC8vIGRlZmluZSBnZXR0ZXIgZnVuY3Rpb24gZm9yIGhhcm1vbnkgZXhwb3J0c1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5kID0gZnVuY3Rpb24oZXhwb3J0cywgbmFtZSwgZ2V0dGVyKSB7XG4gXHRcdGlmKCFfX3dlYnBhY2tfcmVxdWlyZV9fLm8oZXhwb3J0cywgbmFtZSkpIHtcbiBcdFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgbmFtZSwge1xuIFx0XHRcdFx0Y29uZmlndXJhYmxlOiBmYWxzZSxcbiBcdFx0XHRcdGVudW1lcmFibGU6IHRydWUsXG4gXHRcdFx0XHRnZXQ6IGdldHRlclxuIFx0XHRcdH0pO1xuIFx0XHR9XG4gXHR9O1xuXG4gXHQvLyBnZXREZWZhdWx0RXhwb3J0IGZ1bmN0aW9uIGZvciBjb21wYXRpYmlsaXR5IHdpdGggbm9uLWhhcm1vbnkgbW9kdWxlc1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5uID0gZnVuY3Rpb24obW9kdWxlKSB7XG4gXHRcdHZhciBnZXR0ZXIgPSBtb2R1bGUgJiYgbW9kdWxlLl9fZXNNb2R1bGUgP1xuIFx0XHRcdGZ1bmN0aW9uIGdldERlZmF1bHQoKSB7IHJldHVybiBtb2R1bGVbJ2RlZmF1bHQnXTsgfSA6XG4gXHRcdFx0ZnVuY3Rpb24gZ2V0TW9kdWxlRXhwb3J0cygpIHsgcmV0dXJuIG1vZHVsZTsgfTtcbiBcdFx0X193ZWJwYWNrX3JlcXVpcmVfXy5kKGdldHRlciwgJ2EnLCBnZXR0ZXIpO1xuIFx0XHRyZXR1cm4gZ2V0dGVyO1xuIFx0fTtcblxuIFx0Ly8gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm8gPSBmdW5jdGlvbihvYmplY3QsIHByb3BlcnR5KSB7IHJldHVybiBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwob2JqZWN0LCBwcm9wZXJ0eSk7IH07XG5cbiBcdC8vIF9fd2VicGFja19wdWJsaWNfcGF0aF9fXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLnAgPSBcIlwiO1xuXG4gXHQvLyBMb2FkIGVudHJ5IG1vZHVsZSBhbmQgcmV0dXJuIGV4cG9ydHNcbiBcdHJldHVybiBfX3dlYnBhY2tfcmVxdWlyZV9fKF9fd2VicGFja19yZXF1aXJlX18ucyA9IDApO1xuXG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIHdlYnBhY2svYm9vdHN0cmFwIDY0MTkzNGFkZjhmNTUzMDczOWMwIiwiaW1wb3J0IFBheW1lbnQgZnJvbSAnLi91dGlscy9wYXltZW50J1xyXG5cclxuaWYgKHdpbmRvdy5QYXltZW50UmVxdWVzdCkge1xyXG4gIGNvbnN0IHBheW1lbnRBbW91bnQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdpbnB1dCcpXHJcbiAgY29uc3QgcGF5bWVudFN1Ym1pdCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2J1dHRvbicpXHJcblxyXG4gIHBheW1lbnRBbW91bnQuY2xhc3NMaXN0LmFkZCgnanMtcGF5bWVudC1hbW91bnQnKVxyXG4gIHBheW1lbnRTdWJtaXQudGV4dENvbnRlbnQgPSAnUGF5J1xyXG5cclxuICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCdib2R5JykuYXBwZW5kQ2hpbGQocGF5bWVudEFtb3VudClcclxuICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCdib2R5JykuYXBwZW5kQ2hpbGQocGF5bWVudFN1Ym1pdClcclxuXHJcbiAgcGF5bWVudFN1Ym1pdC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IG5ldyBQYXltZW50KHBheW1lbnRBbW91bnQudmFsdWUpKVxyXG59IGVsc2Uge1xyXG4gIGNvbnN0IHdhcm4gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKVxyXG4gIGNvbnN0IGxpbmsgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdhJylcclxuICBjb25zdCBib2R5ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignYm9keScpXHJcbiAgbGluay5ocmVmID0gJ2h0dHBzOi8vd2ViLXBheW1lbnQtYXBpcy5hcHBzcG90LmNvbS8nXHJcbiAgbGluay50ZXh0Q29udGVudCA9ICdNYXliZSB5b3Ugd2lsbCB0cnkgYXBwbGUgcGF5PydcclxuICB3YXJuLnRleHRDb250ZW50ID0gJ05vIHN1cHBvcnQnXHJcbiAgYm9keS5hcHBlbmRDaGlsZCh3YXJuKVxyXG4gIGJvZHkuYXBwZW5kQ2hpbGQobGluaylcclxufVxyXG5cblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gLi9zcmMvaW5kZXguanMiLCJleHBvcnQgZGVmYXVsdCBjbGFzcyBQYXltZW50IHtcclxuICBjb25zdHJ1Y3Rvcih2YWx1ZSwgY3VycmVuY3kgPSAnUlVCJywgc3VwcG9ydGVkTWV0aG9kcyA9IFsnYmFzaWMtY2FyZCddKSB7XHJcbiAgICB0aGlzLnZhbHVlID0gdmFsdWVcclxuICAgIHRoaXMuY3VycmVuY3kgPSBjdXJyZW5jeVxyXG4gICAgdGhpcy5zdXBwb3J0ZWRNZXRob2RzID0gc3VwcG9ydGVkTWV0aG9kc1xyXG5cclxuICAgIHRoaXMuaW5pdCgpXHJcbiAgfVxyXG4gIGluaXQoKSB7XHJcbiAgICBjb25zdCB7IHBheW1lbnRNZXRob2RzLCBwYXltZW50RGV0YWlscywgb3B0aW9ucyB9ID0gdGhpcy5jb25maWd1cmUoKVxyXG5cclxuICAgIGNvbnN0IHBheW1lbnQgPSBuZXcgUGF5bWVudFJlcXVlc3QoXHJcbiAgICAgIHBheW1lbnRNZXRob2RzLFxyXG4gICAgICBwYXltZW50RGV0YWlscyxcclxuICAgICAgb3B0aW9uc1xyXG4gICAgKVxyXG5cclxuICAgIHBheW1lbnRcclxuICAgICAgLnNob3coKVxyXG4gICAgICAudGhlbihyZXMgPT4gY29uc29sZS5sb2cocmVzKSlcclxuICAgICAgLmNhdGNoKGVyciA9PiBjb25zb2xlLmxvZygnRXJyb3I6ICcsIGVycikpXHJcbiAgfVxyXG4gIGNvbmZpZ3VyZShcclxuICAgIHZhbHVlID0gdGhpcy52YWx1ZSxcclxuICAgIGN1cnJlbmN5ID0gdGhpcy5jdXJyZW5jeSxcclxuICAgIHN1cHBvcnRlZE1ldGhvZHMgPSB0aGlzLnN1cHBvcnRlZE1ldGhvZHNcclxuICApIHtcclxuICAgIGNvbnN0IHBheW1lbnRNZXRob2RzID0gW1xyXG4gICAgICB7XHJcbiAgICAgICAgc3VwcG9ydGVkTWV0aG9kc1xyXG4gICAgICB9XHJcbiAgICBdXHJcbiAgICBjb25zdCBwYXltZW50RGV0YWlscyA9IHtcclxuICAgICAgdG90YWw6IHtcclxuICAgICAgICBsYWJlbDogJ0RpeiBtYW5leScsXHJcbiAgICAgICAgYW1vdW50OiB7XHJcbiAgICAgICAgICBjdXJyZW5jeSxcclxuICAgICAgICAgIHZhbHVlXHJcbiAgICAgICAgfVxyXG4gICAgICB9LFxyXG4gICAgICBkaXNwbGF5SXRlbXM6IFtcclxuICAgICAgICB7XHJcbiAgICAgICAgICBsYWJlbDogJ0Rpc2NvdW50JyxcclxuICAgICAgICAgIGFtb3VudDoge1xyXG4gICAgICAgICAgICBjdXJyZW5jeSxcclxuICAgICAgICAgICAgdmFsdWU6IC01XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICBdXHJcbiAgICB9XHJcbiAgICBjb25zdCBvcHRpb25zID0ge1xyXG4gICAgICByZXF1ZXN0UGF5ZXJOYW1lOiB0cnVlLFxyXG4gICAgICByZXF1ZXN0UGF5ZXJFbWFpbDogdHJ1ZVxyXG4gICAgfVxyXG5cclxuICAgIHJldHVybiB7IHBheW1lbnRNZXRob2RzLCBwYXltZW50RGV0YWlscywgb3B0aW9ucyB9XHJcbiAgfVxyXG59XHJcblxuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyAuL3NyYy91dGlscy9wYXltZW50LmpzIl0sInNvdXJjZVJvb3QiOiIifQ==